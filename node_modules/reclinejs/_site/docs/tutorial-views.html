<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Library - Example - Quickstart - Recline Data Explorer and Library</title>

  <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="../vendor/bootstrap/2.0.2/css/bootstrap.css" />

  
      <link rel="stylesheet" href="../vendor/leaflet/0.4.4/leaflet.css">
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="../vendor/leaflet/0.4.4/leaflet.ie.css" />
  <![endif]-->
  <link rel="stylesheet" href="../vendor/leaflet.markercluster/MarkerCluster.css">
  <link rel="stylesheet" href="../vendor/leaflet.markercluster/MarkerCluster.Default.css">
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="../vendor/leaflet.markercluster/MarkerCluster.Default.ie.css" />
  <![endif]-->
  <link rel="stylesheet" href="../vendor/slickgrid/2.0.1/slick.grid.css">
  <link rel="stylesheet" href="../vendor/timeline/20120520/css/timeline.css">

  <!-- Recline CSS components -->
  <link rel="stylesheet" href="../css/grid.css">
  <link rel="stylesheet" href="../css/slickgrid.css">
  <link rel="stylesheet" href="../css/graph.css">
  <link rel="stylesheet" href="../css/transform.css">
  <link rel="stylesheet" href="../css/map.css">
  <link rel="stylesheet" href="../css/multiview.css">
  <!-- /Recline CSS components -->

  <!-- 3rd party JS libraries -->
  <script type="text/javascript" src="../vendor/jquery/1.7.1/jquery.js"></script>
  <script type="text/javascript" src="../vendor/underscore/1.4.2/underscore.js"></script>
  <script type="text/javascript" src="../vendor/backbone/0.9.2/backbone.js"></script>
  <script type="text/javascript" src="../vendor/mustache/0.5.0-dev/mustache.js"></script>
  <script type="text/javascript" src="../vendor/bootstrap/2.0.2/bootstrap.js"></script>
  <script type="text/javascript" src="../vendor/flotr2/flotr2.js"></script>
  <script type="text/javascript" src="../vendor/leaflet/0.4.4/leaflet.js"></script>
  <script type="text/javascript" src="../vendor/leaflet.markercluster/leaflet.markercluster.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/jquery-ui-1.8.16.custom.min.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/jquery.event.drag-2.0.min.js"></script>
  <script type="text/javascript" src="../vendor/slickgrid/2.0.1/slick.grid.min.js"></script>
  <script type="text/javascript" src="../vendor/moment/1.6.2/moment.js"></script>
  <script type="text/javascript" src="../vendor/timeline/20120520/js/timeline.js"></script>

  <!--
    ## Just use the all in one library version rather than individual files

  <script type="text/javascript" src="../dist/recline.js"></script>

  -->

  <!-- model and backends -->
  <script type="text/javascript" src="../src/ecma-fixes.js"></script>
  <script type="text/javascript" src="../src/model.js"></script>
  <script type="text/javascript" src="../src/backend.memory.js"></script>
  <script type="text/javascript" src="../src/backend.dataproxy.js"></script>
  <script type="text/javascript" src="../src/backend.gdocs.js"></script>
  <script type="text/javascript" src="../src/backend.elasticsearch.js"></script>
  <script type="text/javascript" src="../src/backend.csv.js"></script>
  <script type="text/javascript" src="../src/backend.ckan.js"></script>
  <script type="text/javascript" src="../src/backend.solr.js"></script>

  <!-- views -->
  <script type="text/javascript" src="../src/view.grid.js"></script>
  <script type="text/javascript" src="../src/view.slickgrid.js"></script>
  <script type="text/javascript" src="../src/view.transform.js"></script>
  <script type="text/javascript" src="../src/data.transform.js"></script>
  <script type="text/javascript" src="../src/view.graph.js"></script>
  <script type="text/javascript" src="../src/view.map.js"></script>
  <script type="text/javascript" src="../src/view.timeline.js"></script>
  <script type="text/javascript" src="../src/widget.pager.js"></script>
  <script type="text/javascript" src="../src/widget.queryeditor.js"></script>
  <script type="text/javascript" src="../src/widget.filtereditor.js"></script>
  <script type="text/javascript" src="../src/widget.facetviewer.js"></script>
  <script type="text/javascript" src="../src/widget.fields.js"></script>
  <script type="text/javascript" src="../src/view.multiview.js"></script>


  

  <!-- link rel="stylesheet" href="vendor/bootstrap/2.0.2/css/bootstrap-responsive.css" -->

  <link href="../css-site/pygments.css" rel="stylesheet" type="text/css" />
  <link href="../css-site/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="logo-icon pull-left" href="/">
        <img src="http://assets.okfn.org/p/recline/img/chair.png" />
      </a>
      <a class="brand" href="../"><strong>Recline.js</strong> &ndash; relax with your data</a>
      <ul class="nav">
        <li>
          <a href="../docs/">
            <i class="icon-book icon-white"></i>
            Documentation
          </a>
        </li>
        <li class="divider-vertical"></li>
        <li>
          <a href="../docs/tutorials.html">
            <i class="icon-road icon-white"></i>
            Tutorials
          </a>
        </li>
        <li class="divider-vertical"></li>
        <li>
          <a href="../demos/">
            <i class="icon-pencil icon-white"></i>
            Demos
          </a>
        </li>
        <li class="divider-vertical"></li>
        <li>
          <a href="../download.html">
            <i class="icon-download-alt icon-white"></i>
            Download
          </a>
        </li>
      </ul>
      <ul class="nav pull-right">
        <li>
          <a href="http://github.com/okfn/recline/">
            <i class="icon-download-alt icon-white"></i>
            GitHub
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

<div class="container">
  <div class='page-header'>
  <h1>
    Views Tutorial
    <br />
    <small>This step-by-step tutorial will quickly get you started with Recline basics, including creating a dataset from local data and setting up a grid, graph and map to display it.</small>
  </h1>
</div>
<h3 id='preparing_your_page'>Preparing your page</h3>

<p>Before writing any code with Recline, you need to do the following preparation steps on your page:</p>

<ol>
<li>
<p><a href='../download.html'>Download ReclineJS</a> and relevant dependencies.</p>
</li>

<li>
<p>Include the relevant CSS in the head section of your document:</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- you do not have to use bootstrap but we use it by default --&gt;</span>
<span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;vendor/bootstrap/2.0.2/css/bootstrap.css&quot;</span> <span class='nt'>/&gt;</span>
<span class='c'>&lt;!-- CSS for relevant view components - here we just have grid --&gt;</span>
<span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;css/grid.css&quot;</span> <span class='nt'>/&gt;</span>
</code></pre>
</div></li>

<li>
<p>Include the relevant Javascript files somewhere on the page (preferably before body close tag):</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- 3rd party dependencies --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/jquery/1.7.1/jquery.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/underscore/1.1.6/underscore.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/backbone/0.5.1/backbone.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/jquery.mustache.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/bootstrap/2.0.2/bootstrap.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='c'>&lt;!-- note that we could include individual components rather than whole of recline e.g.</span>
<span class='c'>&lt;script type=&quot;text/javascript&quot; src=&quot;src/model.js&quot;&gt;&lt;/script&gt;</span>
<span class='c'>&lt;script type=&quot;text/javascript&quot; src=&quot;src/backend/memory.js&quot;&gt;&lt;/script&gt;</span>
<span class='c'>&lt;script type=&quot;text/javascript&quot; src=&quot;src/view-grid.js&quot;&gt;&lt;/script&gt;</span>
<span class='c'>--&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;dist/recline.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre>
</div></li>
</ol>

<p>You&#8217;re now ready to start working with Recline.</p>

<h3 id='creating_a_dataset'>Creating a Dataset</h3>

<p>Here&#8217;s some example data We are going to work with:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>data</span> <span class='o'>=</span> <span class='p'>[</span>
  <span class='p'>{</span><span class='nx'>id</span><span class='o'>:</span> <span class='mi'>0</span><span class='p'>,</span> <span class='nx'>date</span><span class='o'>:</span> <span class='s1'>&#39;2011-01-01&#39;</span><span class='p'>,</span> <span class='nx'>x</span><span class='o'>:</span> <span class='mi'>1</span><span class='p'>,</span> <span class='nx'>y</span><span class='o'>:</span> <span class='mi'>2</span><span class='p'>,</span> <span class='nx'>z</span><span class='o'>:</span> <span class='mi'>3</span><span class='p'>,</span> <span class='nx'>country</span><span class='o'>:</span> <span class='s1'>&#39;DE&#39;</span><span class='p'>,</span> <span class='nx'>geo</span><span class='o'>:</span> <span class='p'>{</span><span class='nx'>lat</span><span class='o'>:</span><span class='mf'>52.56</span><span class='p'>,</span> <span class='nx'>lon</span><span class='o'>:</span><span class='mf'>13.40</span><span class='p'>}</span> <span class='p'>},</span>
  <span class='p'>{</span><span class='nx'>id</span><span class='o'>:</span> <span class='mi'>1</span><span class='p'>,</span> <span class='nx'>date</span><span class='o'>:</span> <span class='s1'>&#39;2011-02-02&#39;</span><span class='p'>,</span> <span class='nx'>x</span><span class='o'>:</span> <span class='mi'>2</span><span class='p'>,</span> <span class='nx'>y</span><span class='o'>:</span> <span class='mi'>4</span><span class='p'>,</span> <span class='nx'>z</span><span class='o'>:</span> <span class='mi'>24</span><span class='p'>,</span> <span class='nx'>country</span><span class='o'>:</span> <span class='s1'>&#39;UK&#39;</span><span class='p'>,</span> <span class='nx'>geo</span><span class='o'>:</span> <span class='p'>{</span><span class='nx'>lat</span><span class='o'>:</span><span class='mf'>54.97</span><span class='p'>,</span> <span class='nx'>lon</span><span class='o'>:-</span><span class='mf'>1.60</span><span class='p'>}},</span>
  <span class='p'>{</span><span class='nx'>id</span><span class='o'>:</span> <span class='mi'>2</span><span class='p'>,</span> <span class='nx'>date</span><span class='o'>:</span> <span class='s1'>&#39;2011-03-03&#39;</span><span class='p'>,</span> <span class='nx'>x</span><span class='o'>:</span> <span class='mi'>3</span><span class='p'>,</span> <span class='nx'>y</span><span class='o'>:</span> <span class='mi'>6</span><span class='p'>,</span> <span class='nx'>z</span><span class='o'>:</span> <span class='mi'>9</span><span class='p'>,</span> <span class='nx'>country</span><span class='o'>:</span> <span class='s1'>&#39;US&#39;</span><span class='p'>,</span> <span class='nx'>geo</span><span class='o'>:</span> <span class='p'>{</span><span class='nx'>lat</span><span class='o'>:</span><span class='mf'>40.00</span><span class='p'>,</span> <span class='nx'>lon</span><span class='o'>:-</span><span class='mf'>75.5</span><span class='p'>}},</span>
  <span class='p'>{</span><span class='nx'>id</span><span class='o'>:</span> <span class='mi'>3</span><span class='p'>,</span> <span class='nx'>date</span><span class='o'>:</span> <span class='s1'>&#39;2011-04-04&#39;</span><span class='p'>,</span> <span class='nx'>x</span><span class='o'>:</span> <span class='mi'>4</span><span class='p'>,</span> <span class='nx'>y</span><span class='o'>:</span> <span class='mi'>8</span><span class='p'>,</span> <span class='nx'>z</span><span class='o'>:</span> <span class='mi'>6</span><span class='p'>,</span> <span class='nx'>country</span><span class='o'>:</span> <span class='s1'>&#39;UK&#39;</span><span class='p'>,</span> <span class='nx'>geo</span><span class='o'>:</span> <span class='p'>{</span><span class='nx'>lat</span><span class='o'>:</span><span class='mf'>57.27</span><span class='p'>,</span> <span class='nx'>lon</span><span class='o'>:-</span><span class='mf'>6.20</span><span class='p'>}},</span>
  <span class='p'>{</span><span class='nx'>id</span><span class='o'>:</span> <span class='mi'>4</span><span class='p'>,</span> <span class='nx'>date</span><span class='o'>:</span> <span class='s1'>&#39;2011-05-04&#39;</span><span class='p'>,</span> <span class='nx'>x</span><span class='o'>:</span> <span class='mi'>5</span><span class='p'>,</span> <span class='nx'>y</span><span class='o'>:</span> <span class='mi'>10</span><span class='p'>,</span> <span class='nx'>z</span><span class='o'>:</span> <span class='mi'>15</span><span class='p'>,</span> <span class='nx'>country</span><span class='o'>:</span> <span class='s1'>&#39;UK&#39;</span><span class='p'>,</span> <span class='nx'>geo</span><span class='o'>:</span> <span class='p'>{</span><span class='nx'>lat</span><span class='o'>:</span><span class='mf'>51.58</span><span class='p'>,</span> <span class='nx'>lon</span><span class='o'>:</span><span class='mi'>0</span><span class='p'>}},</span>
  <span class='p'>{</span><span class='nx'>id</span><span class='o'>:</span> <span class='mi'>5</span><span class='p'>,</span> <span class='nx'>date</span><span class='o'>:</span> <span class='s1'>&#39;2011-06-02&#39;</span><span class='p'>,</span> <span class='nx'>x</span><span class='o'>:</span> <span class='mi'>6</span><span class='p'>,</span> <span class='nx'>y</span><span class='o'>:</span> <span class='mi'>12</span><span class='p'>,</span> <span class='nx'>z</span><span class='o'>:</span> <span class='mi'>18</span><span class='p'>,</span> <span class='nx'>country</span><span class='o'>:</span> <span class='s1'>&#39;DE&#39;</span><span class='p'>,</span> <span class='nx'>geo</span><span class='o'>:</span> <span class='p'>{</span><span class='nx'>lat</span><span class='o'>:</span><span class='mf'>51.04</span><span class='p'>,</span> <span class='nx'>lon</span><span class='o'>:</span><span class='mf'>7.9</span><span class='p'>}}</span>
<span class='p'>];</span>
</code></pre>
</div>
<p>In this data we have 6 documents / rows. Each document is a javascript object containing keys and values (note that all values here are &#8216;simple&#8217; but there is no reason you cannot have objects as values allowing you to nest data.</p>

<p>We can now create a recline Dataset object (and memory backend) from this raw data:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>dataset</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>recline</span><span class='p'>.</span><span class='nx'>Model</span><span class='p'>.</span><span class='nx'>Dataset</span><span class='p'>({</span>
  <span class='nx'>records</span><span class='o'>:</span> <span class='nx'>data</span>
<span class='p'>});</span>
</code></pre>
</div>
<h3 id='setting_up_the_grid'>Setting up the Grid</h3>

<p>Let&#8217;s create a data grid view to display the dataset we have just created. We&#8217;re going to use the SlickGrid-based grid so we need the following:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;css/slickgrid.css&quot;</span><span class='nt'>&gt;</span>

<span class='c'>&lt;!-- vendor --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;../vendor/slickgrid/2.0.1/jquery-ui-1.8.16.custom.min.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;../vendor/slickgrid/2.0.1/jquery.event.drag-2.0.min.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;../vendor/slickgrid/2.0.1/slick.grid.min.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>

<span class='c'>&lt;!-- Recline --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;src/view.slickgrid.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre>
</div>
<p>Now, let&#8217;s create an HTML element to for the Grid:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;mygrid&quot;</span> <span class='na'>style=</span><span class='s'>&quot;height: 400px&quot;</span><span class='nt'>&gt;&lt;/div&gt;</span>
</code></pre>
</div>
<p>Now let&#8217;s set up the Grid:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>$el</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#mygrid&#39;</span><span class='p'>);</span>
<span class='kd'>var</span> <span class='nx'>grid</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>recline</span><span class='p'>.</span><span class='nx'>View</span><span class='p'>.</span><span class='nx'>SlickGrid</span><span class='p'>({</span>
  <span class='nx'>model</span><span class='o'>:</span> <span class='nx'>dataset</span><span class='p'>,</span>
  <span class='nx'>el</span><span class='o'>:</span> <span class='nx'>$el</span>
<span class='p'>});</span>
<span class='nx'>grid</span><span class='p'>.</span><span class='nx'>visible</span> <span class='o'>=</span> <span class='kc'>true</span><span class='p'>;</span>
<span class='nx'>grid</span><span class='p'>.</span><span class='nx'>render</span><span class='p'>();</span>
</code></pre>
</div>
<p>And hey presto:</p>
<div class='recline-read-only' id='mygrid' style='margin-bottom: 30px; height: 200px;'>&nbsp;</div><script type='text/javascript'>
var data = [
  {id: 0, date: '2011-01-01', x: 1, y: 2, z: 3, country: 'DE', geo: {lat:52.56, lon:13.40} },
  {id: 1, date: '2011-02-02', x: 2, y: 4, z: 24, country: 'UK', geo: {lat:54.97, lon:-1.60}},
  {id: 2, date: '2011-03-03', x: 3, y: 6, z: 9, country: 'US', geo: {lat:40.00, lon:-75.5}},
  {id: 3, date: '2011-04-04', x: 4, y: 8, z: 6, country: 'UK', geo: {lat:57.27, lon:-6.20}},
  {id: 4, date: '2011-05-04', x: 5, y: 10, z: 15, country: 'UK', geo: {lat:51.58, lon:0}},
  {id: 5, date: '2011-06-02', x: 6, y: 12, z: 18, country: 'DE', geo: {lat:51.04, lon:7.9}}
];


var dataset = new recline.Model.Dataset({
  records: data
});
var $el = $('#mygrid');
var grid = new recline.View.SlickGrid({
  model: dataset,
  el: $el
});
grid.visible = true;
grid.render();
</script>
<h3 id='creating_a_graph'>Creating a Graph</h3>

<p>Let&#8217;s create a graph view to display a line graph for this dataset.</p>

<p>First, add the additional dependencies for this view. These are the Flot library and the Recline Graph view:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;css/graph.css&quot;</span><span class='nt'>&gt;</span>

<span class='c'>&lt;!-- javascript --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/flotr2/flotr2.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;src/view.graph.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre>
</div>
<p>Next, create a new div for the graph:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;mygraph&quot;</span><span class='nt'>&gt;&lt;/div&gt;</span>
</code></pre>
</div>
<p>Now let&#8217;s create the graph, we will use the same dataset we had earlier, and we will need to set the view &#8216;state&#8217; in order to configure the graph with the column to use for the x-axis (&#8220;group&#8221;) and the columns to use for the series to show (&#8220;series&#8221;).</p>
<div class='alert alert-info'>
<strong>State</strong>: The concept of a state is a common feature of Recline views being an object
which stores information about the state and configuration of a given view. You
can read more about it in the general <a href='../docs/views.html'>Views
documentation</a> as well as the documentation of individual views such as the
<a href='../docs/src/view.graph.html'>Graph View</a>.
</div><div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>$el</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#mygraph&#39;</span><span class='p'>);</span>
<span class='kd'>var</span> <span class='nx'>graph</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>recline</span><span class='p'>.</span><span class='nx'>View</span><span class='p'>.</span><span class='nx'>Graph</span><span class='p'>({</span>
  <span class='nx'>model</span><span class='o'>:</span> <span class='nx'>dataset</span><span class='p'>,</span>
  <span class='nx'>state</span><span class='o'>:</span> <span class='p'>{</span>
    <span class='nx'>group</span><span class='o'>:</span> <span class='s2'>&quot;date&quot;</span><span class='p'>,</span>
    <span class='nx'>series</span><span class='o'>:</span> <span class='p'>[</span><span class='s2'>&quot;x&quot;</span><span class='p'>,</span> <span class='s2'>&quot;z&quot;</span><span class='p'>]</span>
  <span class='p'>}</span>
<span class='p'>});</span>
<span class='nx'>$el</span><span class='p'>.</span><span class='nx'>append</span><span class='p'>(</span><span class='nx'>graph</span><span class='p'>.</span><span class='nx'>el</span><span class='p'>);</span>
<span class='nx'>graph</span><span class='p'>.</span><span class='nx'>render</span><span class='p'>();</span>
<span class='nx'>graph</span><span class='p'>.</span><span class='nx'>redraw</span><span class='p'>();</span>
</code></pre>
</div>
<p>The result is the following graph:</p>
<div id='mygraph' style='margin-bottom: 30px;'>&nbsp;</div><script type='text/javascript'>
var $el = $('#mygraph');
var graph = new recline.View.Graph({
  model: dataset,
  state: {
    graphType: "lines-and-points",
    group: "x",
    series: ["y", "z"]
  }
});
$el.append(graph.el);
graph.render();
graph.redraw();
</script>
<h3 id='creating_a_map'>Creating a Map</h3>

<p>Now, let&#8217;s create a map of this dataset using the lon/lat information which is present on these data points.</p>

<p>First, add the additional dependencies for the map view. These are the Leaflet library and the Recline Map view:</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- css --&gt;</span>
<span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;vendor/leaflet/0.4.4/leaflet.css&quot;</span><span class='nt'>&gt;</span>
<span class='c'>&lt;!--[if lte IE 8]&gt;</span>
<span class='c'>&lt;link rel=&quot;stylesheet&quot; href=&quot;vendor/leaflet/0.4.4/leaflet.ie.css&quot; /&gt;</span>
<span class='c'>&lt;![endif]--&gt;</span>
<span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;vendor/leaflet.markercluster/MarkerCluster.css&quot;</span><span class='nt'>&gt;</span>
<span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;vendor/leaflet.markercluster/MarkerCluster.Default.css&quot;</span><span class='nt'>&gt;</span>
<span class='c'>&lt;!--[if lte IE 8]&gt;</span>
<span class='c'>&lt;link rel=&quot;stylesheet&quot; href=&quot;vendor/leaflet.markercluster/MarkerCluster.Default.ie.css&quot; /&gt;</span>
<span class='c'>&lt;![endif]--&gt;</span>
<span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;css/map.css&quot;</span><span class='nt'>&gt;</span>

<span class='c'>&lt;!-- javascript --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/leaflet/0.4.4/leaflet.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/leaflet.markercluster/leaflet.markercluster.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;src/view-map.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre>
</div>
<p>Now, create a new div for the map:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;mymap&quot;</span><span class='nt'>&gt;&lt;/div&gt;</span>
</code></pre>
</div>
<p>Now let&#8217;s create the map, we will use the existing dataset object created previously:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>$el</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#mymap&#39;</span><span class='p'>);</span>
<span class='kd'>var</span> <span class='nx'>map</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>recline</span><span class='p'>.</span><span class='nx'>View</span><span class='p'>.</span><span class='nx'>Map</span><span class='p'>({</span>
  <span class='nx'>model</span><span class='o'>:</span> <span class='nx'>dataset</span>
<span class='p'>});</span>
<span class='nx'>$el</span><span class='p'>.</span><span class='nx'>append</span><span class='p'>(</span><span class='nx'>map</span><span class='p'>.</span><span class='nx'>el</span><span class='p'>);</span>
<span class='nx'>map</span><span class='p'>.</span><span class='nx'>render</span><span class='p'>();</span>
</code></pre>
</div><div id='mymap'>&nbsp;</div><script type='text/javascript'>
var $el = $('#mymap');
var map = new recline.View.Map({
  model: dataset
});
$el.append(map.el);
map.render();
</script>
<h3 id='creating_a_timeline'>Creating a Timeline</h3>

<p>Now, let&#8217;s create a timeline for this dataset using the date information which is present on these data points.</p>

<p>First, add the additional dependencies for the timeline view. The timeline is built on the excellent Verite Timeline widget so that library is the key one for this view:</p>
<div class='highlight'><pre><code class='html'><span class='c'>&lt;!-- css --&gt;</span>
<span class='nt'>&lt;link</span> <span class='na'>rel=</span><span class='s'>&quot;stylesheet&quot;</span> <span class='na'>href=</span><span class='s'>&quot;vendor/timeline/20120520/css/timeline.css&quot;</span><span class='nt'>&gt;</span>

<span class='c'>&lt;!-- javascript --&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/moment/1.6.2/moment.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;vendor/timeline/20120520/js/timeline.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre>
</div>
<p>Now, create a new div for the map:</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;div</span> <span class='na'>id=</span><span class='s'>&quot;mytimeline&quot;</span><span class='nt'>&gt;&lt;/div&gt;</span>
</code></pre>
</div>
<p>Now let&#8217;s create the timeline, we will use the existing dataset object created previously:</p>
<div class='highlight'><pre><code class='javascript'><span class='kd'>var</span> <span class='nx'>$el</span> <span class='o'>=</span> <span class='nx'>$</span><span class='p'>(</span><span class='s1'>&#39;#mytimeline&#39;</span><span class='p'>);</span>
<span class='kd'>var</span> <span class='nx'>timeline</span> <span class='o'>=</span> <span class='k'>new</span> <span class='nx'>recline</span><span class='p'>.</span><span class='nx'>View</span><span class='p'>.</span><span class='nx'>Timeline</span><span class='p'>({</span>
  <span class='nx'>model</span><span class='o'>:</span> <span class='nx'>dataset</span>
<span class='p'>});</span>
<span class='nx'>$el</span><span class='p'>.</span><span class='nx'>append</span><span class='p'>(</span><span class='nx'>timeline</span><span class='p'>.</span><span class='nx'>el</span><span class='p'>);</span>
<span class='c1'>// set the headline/title for each record with x column</span>
<span class='nx'>timeline</span><span class='p'>.</span><span class='nx'>convertRecord</span> <span class='o'>=</span> <span class='kd'>function</span><span class='p'>(</span><span class='nx'>record</span><span class='p'>,</span> <span class='nx'>fields</span><span class='p'>)</span> <span class='p'>{</span>
  <span class='kd'>var</span> <span class='nx'>out</span> <span class='o'>=</span> <span class='k'>this</span><span class='p'>.</span><span class='nx'>_convertRecord</span><span class='p'>(</span><span class='nx'>record</span><span class='p'>);</span>
  <span class='k'>if</span> <span class='p'>(</span><span class='nx'>out</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='nx'>out</span><span class='p'>.</span><span class='nx'>headline</span> <span class='o'>=</span> <span class='nx'>record</span><span class='p'>.</span><span class='nx'>get</span><span class='p'>(</span><span class='s1'>&#39;x&#39;</span><span class='p'>).</span><span class='nx'>toString</span><span class='p'>();</span>
  <span class='p'>}</span>
  <span class='k'>return</span> <span class='nx'>out</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='nx'>timeline</span><span class='p'>.</span><span class='nx'>render</span><span class='p'>();</span>
</code></pre>
</div><div id='mytimeline'>&nbsp;</div><div style='clear: both;' /><script type='text/javascript'>
var $el = $('#mytimeline');
var timeline = new recline.View.Timeline({
  model: dataset
});
$el.append(timeline.el);
// set the headline/title for each record with x column
timeline.convertRecord = function(record, fields) {
  var out = this._convertRecord(record);
  if (out) {
    out.headline = record.get('x').toString();
  }
  return out;
}
timeline.render();


</script>
</div>



<section class="footer">
	<div class="container">
    <div class="row">
      <div class="span4">
        <p class="getit-btn"><a href="../docs/" class="btn">Use the Library &raquo;</a></p>
        <p>Recline.js is freely redistributable under the terms of the MIT license.</p>
      </div>
      <div class="span3">
        <p><a href="http://www.shuttleworthfoundation.org/"><img src="http://farm8.staticflickr.com/7019/6467412887_18f72f5066_n.jpg" style="width: 140px;" alt="Supported by funding from the Shuttleworth Foundation" /></a></p>
        <ul>
          <li><a href="http://datahub.io/">The DataHub</a></li>
          <li><a href="http://OpenSpending.org/">OpenSpending.org</a></li>
          <li><a href="http://datacouch.com/">DataCouch.com</a></li>
        </ul>
      </div>
      <div class="span3">
        <ul>
          <li><a href="http://okfnlabs.org/">Open Knowledge Foundation Labs</a></li>
          <li><a href="http://opendefinition.org/">Open Definition</a></li>
          <li><a href="http://okfn.org/">Open Knowledge Foundation</a></li>
        </ul>
      </div>
      <div class="span2">
        <h5>Contacts</h5>
        <ul style="list-style-type: none; margin-left: 0;">
          <li><a href="http://twitter.com/ReclineJS">@ReclineJS</a></li>
          <li><a href="http://twitter.com/maxogden">@maxogden</a></li>
          <li><a href="http://twitter.com/rufuspollock">@rufuspollock</a></li>
        </ul>
        <a class="nav-logo" href="http://okfn.org/" title="An Open Knowledge Foundation Project">
          <img src="http://assets.okfn.org/p/okfn/img/logo_28x30.png" alt="Open Knowledge Foundation logo" />
        </a>
      </div>
    </div>
  </div>
</section>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-8271754-44']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
